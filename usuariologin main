#include <iostream>
#include "UsuarioLogin.h"

using namespace std;

int main() {
    UsuarioLogin usuario;
    string correo, nombreUsuario, contrasena, contrasenaVerificar;
    int opcion;

    cout << "Bienvenido a la aplicación de registro\n";
    cout << "Elige una opción:\n";
    cout << "1. Registrarse con correo electrónico\n";
    cout << "2. Registrarse con Google\n";
    cout << "3. Registrarse con Facebook\n";
    cout << "Opción: ";
    cin >> opcion;
    cin.ignore();  // Para limpiar el buffer de la entrada

    if (opcion == 1) {
        // Opción de registro con correo electrónico
        cout << "Introduce tu correo electrónico: ";
        getline(cin, correo);

        // Validar el correo electrónico
        if (!usuario.esCorreoValido(correo)) {
            cout << "El correo electrónico no es válido. Debe contener un '@'.\n";
            return 0;
        }

        cout << "Introduce tu nombre de usuario: ";
        getline(cin, nombreUsuario);

        cout << "Introduce tu contraseña: ";
        getline(cin, contrasena);

        usuario.registrarUsuario(correo, nombreUsuario, contrasena);

        cout << "\nUsuario registrado correctamente con correo electrónico!\n";
    }
    else if (opcion == 2) {
        // Opción de registro con Google
        cout << "Registrado correctamente con Google.\n";
    }
    else if (opcion == 3) {
        // Opción de registro con Facebook
        cout << "Registrado correctamente con Facebook.\n";
    }
    else {
        cout << "Opción inválida. Saliendo...\n";
        return 0;
    }

    // Verificar información del usuario
    cout << "\nCorreo electrónico: " << usuario.obtenerCorreoElectronico() << endl;
    cout << "Nombre de usuario: " << usuario.obtenerNombreUsuario() << endl;

    // Intentar login
    cout << "\nIntroduce la contraseña para verificar tu acceso: ";
    getline(cin, contrasenaVerificar);

    if (usuario.verificarContrasena(contrasenaVerificar)) {
        cout << "Acceso exitoso.\n";
    }
    else {
        cout << "Contraseña incorrecta.\n";
    }

    return 0;
}
